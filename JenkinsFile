pipeline {
    agent { lable "linux"}
    environment{
        git_credential = "GIT_CREDNETIAL_ID"
        aws_credential = "AWS_CREDNETIAL_ID"
        repo_url = "MyRepositoryUrl"
        region = "MyAwsRegion"
    }
    stages{
        
        stage('checkout') {
            steps {
                script {
                    git branch:"${BRANCH_NAME}", credentialsId: "${git_credential}", url: "http://${repo_url}"
                    commitId = sh (script: 'git rev-parse --short HEAD ${GIT_COMMIT}', returnStdout: true).trim()
                }
            }
        }

        stage("Upload to EC2"){
            steps{
                withAWS(region:"${region}", credentials:"${aws_credential}){

                    sh '''
                    #!/bin/bash
                    mkdir /home/ec2-user/GithubFiles
                    cp ./DirectoryA_1/README.txt ./GithubFiles
                    '''
                }    
            }

    }
}

